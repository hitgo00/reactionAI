{"id":"KNfn","dependencies":[{"name":"/Users/hitgo/Desktop/Projects/hand-gesture/node_modules/@tensorflow/tfjs-core/dist/optimizers/momentum_optimizer.js.map","includedInParent":true,"mtime":1599767830977},{"name":"/Users/hitgo/Desktop/Projects/hand-gesture/node_modules/@tensorflow/tfjs-core/src/optimizers/momentum_optimizer.ts","includedInParent":true,"mtime":1599767830977},{"name":"/Users/hitgo/Desktop/Projects/hand-gesture/package.json","includedInParent":true,"mtime":1599767774914},{"name":"/Users/hitgo/Desktop/Projects/hand-gesture/.babelrc","includedInParent":true,"mtime":1599767774914},{"name":"/Users/hitgo/Desktop/Projects/hand-gesture/node_modules/@tensorflow/tfjs-core/package.json","includedInParent":true,"mtime":1599767830977},{"name":"../engine","loc":{"line":17,"column":23},"parent":"/Users/hitgo/Desktop/Projects/hand-gesture/node_modules/@tensorflow/tfjs-core/dist/optimizers/momentum_optimizer.js","resolved":"/Users/hitgo/Desktop/Projects/hand-gesture/node_modules/@tensorflow/tfjs-core/dist/engine.js"},{"name":"../globals","loc":{"line":18,"column":30},"parent":"/Users/hitgo/Desktop/Projects/hand-gesture/node_modules/@tensorflow/tfjs-core/dist/optimizers/momentum_optimizer.js","resolved":"/Users/hitgo/Desktop/Projects/hand-gesture/node_modules/@tensorflow/tfjs-core/dist/globals.js"},{"name":"../ops/ops","loc":{"line":19,"column":34},"parent":"/Users/hitgo/Desktop/Projects/hand-gesture/node_modules/@tensorflow/tfjs-core/dist/optimizers/momentum_optimizer.js","resolved":"/Users/hitgo/Desktop/Projects/hand-gesture/node_modules/@tensorflow/tfjs-core/dist/ops/ops.js"},{"name":"../serialization","loc":{"line":20,"column":30},"parent":"/Users/hitgo/Desktop/Projects/hand-gesture/node_modules/@tensorflow/tfjs-core/dist/optimizers/momentum_optimizer.js","resolved":"/Users/hitgo/Desktop/Projects/hand-gesture/node_modules/@tensorflow/tfjs-core/dist/serialization.js"},{"name":"./sgd_optimizer","loc":{"line":21,"column":29},"parent":"/Users/hitgo/Desktop/Projects/hand-gesture/node_modules/@tensorflow/tfjs-core/dist/optimizers/momentum_optimizer.js","resolved":"/Users/hitgo/Desktop/Projects/hand-gesture/node_modules/@tensorflow/tfjs-core/dist/optimizers/sgd_optimizer.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.MomentumOptimizer=void 0;var e=require(\"../engine\"),t=require(\"../globals\"),s=require(\"../ops/ops\"),i=require(\"../serialization\"),a=require(\"./sgd_optimizer\");class r extends a.SGDOptimizer{constructor(e,t,i=!1){super(e),this.learningRate=e,this.momentum=t,this.useNesterov=i,this.accumulations=[],this.m=(0,s.scalar)(this.momentum)}applyGradients(i){(Array.isArray(i)?i.map(e=>e.name):Object.keys(i)).forEach((a,r)=>{const n=e.ENGINE.registeredVariables[a];if(null==this.accumulations[r]){const e=!1;this.accumulations[r]={originalName:`${a}/momentum`,variable:(0,t.tidy)(()=>(0,s.zerosLike)(n).variable(e))}}const m=this.accumulations[r].variable,o=Array.isArray(i)?i[r].tensor:i[a];null!=o&&(0,t.tidy)(()=>{let e;const t=this.m.mul(m).add(o);e=this.useNesterov?this.c.mul(o.add(t.mul(this.m))).add(n):this.c.mul(t).add(n),m.assign(t),n.assign(e)})}),this.incrementIterations()}dispose(){this.m.dispose(),null!=this.accumulations&&(0,t.dispose)(this.accumulations.map(e=>e.variable))}setMomentum(e){this.momentum=e}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);this.accumulations=e.map(e=>({originalName:e.name,variable:e.tensor.variable(!1)}))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(e,t){return new e(t.learningRate,t.momentum,t.useNesterov)}}exports.MomentumOptimizer=r,r.className=\"Momentum\",(0,i.registerClass)(r);"},"sourceMaps":{"js":{"mappings":[{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":125,"column":0},"generated":{"line":1,"column":0}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":125,"column":0},"generated":{"line":1,"column":13}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":125,"column":0},"generated":{"line":1,"column":20}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":125,"column":0},"generated":{"line":1,"column":35}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":125,"column":0},"generated":{"line":1,"column":43}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":125,"column":0},"generated":{"line":1,"column":56}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":125,"column":0},"generated":{"line":1,"column":57}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":125,"column":0},"generated":{"line":1,"column":64}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":125,"column":0},"generated":{"line":1,"column":68}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":125,"column":0},"generated":{"line":1,"column":76}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":125,"column":0},"generated":{"line":1,"column":99}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":18,"column":0},"generated":{"line":1,"column":101}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":18,"column":0},"generated":{"line":1,"column":105}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":18,"column":0},"generated":{"line":1,"column":107}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":18,"column":0},"generated":{"line":1,"column":115}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":19,"column":0},"generated":{"line":1,"column":128}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":19,"column":0},"generated":{"line":1,"column":130}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":19,"column":0},"generated":{"line":1,"column":138}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":20,"column":0},"generated":{"line":1,"column":152}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":20,"column":0},"generated":{"line":1,"column":154}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":20,"column":0},"generated":{"line":1,"column":162}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":21,"column":0},"generated":{"line":1,"column":176}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":21,"column":0},"generated":{"line":1,"column":178}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":21,"column":0},"generated":{"line":1,"column":186}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":26,"column":0},"generated":{"line":1,"column":206}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":26,"column":0},"generated":{"line":1,"column":208}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":26,"column":0},"generated":{"line":1,"column":216}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":29,"column":6},"generated":{"line":1,"column":235}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":29,"column":13},"generated":{"line":1,"column":241}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":29,"column":39},"generated":{"line":1,"column":251}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":29,"column":6},"generated":{"line":1,"column":253}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":35,"column":2},"generated":{"line":1,"column":266}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":36,"column":16},"generated":{"line":1,"column":278}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":36,"column":46},"generated":{"line":1,"column":280}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":37,"column":14},"generated":{"line":1,"column":282}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":37,"column":28},"generated":{"line":1,"column":285}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":38,"column":10},"generated":{"line":1,"column":288}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":38,"column":10},"generated":{"line":1,"column":294}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":36,"column":16},"generated":{"line":1,"column":297}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":36,"column":16},"generated":{"line":1,"column":302}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":36,"column":16},"generated":{"line":1,"column":315}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":36,"column":46},"generated":{"line":1,"column":317}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":36,"column":46},"generated":{"line":1,"column":322}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":36,"column":46},"generated":{"line":1,"column":331}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":37,"column":14},"generated":{"line":1,"column":333}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":37,"column":14},"generated":{"line":1,"column":338}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":37,"column":14},"generated":{"line":1,"column":350}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":33,"column":10},"generated":{"line":1,"column":352}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":33,"column":10},"generated":{"line":1,"column":357}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":33,"column":47},"generated":{"line":1,"column":371}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":39,"column":9},"generated":{"line":1,"column":374}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":39,"column":9},"generated":{"line":1,"column":379}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":39,"column":13},"generated":{"line":1,"column":382}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":39,"column":20},"generated":{"line":1,"column":384}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":39,"column":20},"generated":{"line":1,"column":386}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":39,"column":20},"generated":{"line":1,"column":394}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":39,"column":25},"generated":{"line":1,"column":399}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":42,"column":2},"generated":{"line":1,"column":409}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":42,"column":17},"generated":{"line":1,"column":424}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":43,"column":26},"generated":{"line":1,"column":428}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":43,"column":32},"generated":{"line":1,"column":434}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":43,"column":40},"generated":{"line":1,"column":442}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":44,"column":8},"generated":{"line":1,"column":445}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":44,"column":26},"generated":{"line":1,"column":447}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":44,"column":30},"generated":{"line":1,"column":451}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":44,"column":38},"generated":{"line":1,"column":454}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":44,"column":43},"generated":{"line":1,"column":456}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":45,"column":8},"generated":{"line":1,"column":462}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":45,"column":15},"generated":{"line":1,"column":469}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":45,"column":20},"generated":{"line":1,"column":474}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":47,"column":18},"generated":{"line":1,"column":478}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":47,"column":26},"generated":{"line":1,"column":486}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":47,"column":27},"generated":{"line":1,"column":487}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":47,"column":33},"generated":{"line":1,"column":489}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":48,"column":12},"generated":{"line":1,"column":494}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":48,"column":12},"generated":{"line":1,"column":500}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":48,"column":20},"generated":{"line":1,"column":502}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":48,"column":27},"generated":{"line":1,"column":504}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":48,"column":27},"generated":{"line":1,"column":511}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":48,"column":47},"generated":{"line":1,"column":531}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":49,"column":10},"generated":{"line":1,"column":534}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":49,"column":35},"generated":{"line":1,"column":537}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":49,"column":10},"generated":{"line":1,"column":543}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":49,"column":15},"generated":{"line":1,"column":548}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":49,"column":29},"generated":{"line":1,"column":562}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":49,"column":41},"generated":{"line":1,"column":565}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":50,"column":14},"generated":{"line":1,"column":566}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":50,"column":14},"generated":{"line":1,"column":572}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":50,"column":26},"generated":{"line":1,"column":575}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":51,"column":13},"generated":{"line":1,"column":577}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":51,"column":13},"generated":{"line":1,"column":582}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":51,"column":27},"generated":{"line":1,"column":596}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":51,"column":32},"generated":{"line":1,"column":599}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":52,"column":10},"generated":{"line":1,"column":600}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":52,"column":27},"generated":{"line":1,"column":616}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":53,"column":10},"generated":{"line":1,"column":629}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":53,"column":20},"generated":{"line":1,"column":639}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":53,"column":25},"generated":{"line":1,"column":641}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":53,"column":25},"generated":{"line":1,"column":643}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":53,"column":25},"generated":{"line":1,"column":649}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":53,"column":31},"generated":{"line":1,"column":654}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":53,"column":41},"generated":{"line":1,"column":656}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":53,"column":41},"generated":{"line":1,"column":658}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":53,"column":41},"generated":{"line":1,"column":669}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":53,"column":48},"generated":{"line":1,"column":672}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":53,"column":57},"generated":{"line":1,"column":681}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":57,"column":12},"generated":{"line":1,"column":686}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":57,"column":12},"generated":{"line":1,"column":692}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":57,"column":27},"generated":{"line":1,"column":694}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":57,"column":32},"generated":{"line":1,"column":699}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":57,"column":46},"generated":{"line":1,"column":713}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":57,"column":49},"generated":{"line":1,"column":716}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":58,"column":12},"generated":{"line":1,"column":725}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":58,"column":23},"generated":{"line":1,"column":727}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":58,"column":29},"generated":{"line":1,"column":733}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":58,"column":37},"generated":{"line":1,"column":741}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":59,"column":10},"generated":{"line":1,"column":744}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":59,"column":28},"generated":{"line":1,"column":746}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":59,"column":31},"generated":{"line":1,"column":749}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":60,"column":10},"generated":{"line":1,"column":756}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":60,"column":28},"generated":{"line":1,"column":758}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":61,"column":22},"generated":{"line":1,"column":761}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":61,"column":10},"generated":{"line":1,"column":767}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":65,"column":11},"generated":{"line":1,"column":771}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":65,"column":11},"generated":{"line":1,"column":773}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":65,"column":11},"generated":{"line":1,"column":775}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":65,"column":11},"generated":{"line":1,"column":781}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":66,"column":12},"generated":{"line":1,"column":786}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":66,"column":12},"generated":{"line":1,"column":790}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":67,"column":14},"generated":{"line":1,"column":792}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":67,"column":14},"generated":{"line":1,"column":798}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":67,"column":32},"generated":{"line":1,"column":800}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":67,"column":37},"generated":{"line":1,"column":805}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":67,"column":39},"generated":{"line":1,"column":807}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":67,"column":43},"generated":{"line":1,"column":811}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":67,"column":57},"generated":{"line":1,"column":814}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":67,"column":61},"generated":{"line":1,"column":818}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":69,"column":10},"generated":{"line":1,"column":821}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":68,"column":12},"generated":{"line":1,"column":823}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":68,"column":17},"generated":{"line":1,"column":828}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":70,"column":14},"generated":{"line":1,"column":840}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":70,"column":19},"generated":{"line":1,"column":845}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":70,"column":21},"generated":{"line":1,"column":847}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":70,"column":25},"generated":{"line":1,"column":851}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":70,"column":34},"generated":{"line":1,"column":853}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":70,"column":38},"generated":{"line":1,"column":857}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":70,"column":54},"generated":{"line":1,"column":859}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":70,"column":58},"generated":{"line":1,"column":863}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":70,"column":63},"generated":{"line":1,"column":868}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":70,"column":68},"generated":{"line":1,"column":873}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":70,"column":72},"generated":{"line":1,"column":877}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":72,"column":21},"generated":{"line":1,"column":880}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":72,"column":26},"generated":{"line":1,"column":885}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":72,"column":28},"generated":{"line":1,"column":887}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":72,"column":32},"generated":{"line":1,"column":891}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":72,"column":49},"generated":{"line":1,"column":894}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":72,"column":53},"generated":{"line":1,"column":898}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":74,"column":8},"generated":{"line":1,"column":901}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":74,"column":21},"generated":{"line":1,"column":903}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":74,"column":28},"generated":{"line":1,"column":910}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":75,"column":8},"generated":{"line":1,"column":913}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":75,"column":14},"generated":{"line":1,"column":915}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":75,"column":21},"generated":{"line":1,"column":922}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":78,"column":9},"generated":{"line":1,"column":929}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":78,"column":9},"generated":{"line":1,"column":934}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":81,"column":2},"generated":{"line":1,"column":956}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":82,"column":9},"generated":{"line":1,"column":966}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":82,"column":9},"generated":{"line":1,"column":971}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":82,"column":11},"generated":{"line":1,"column":973}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":83,"column":30},"generated":{"line":1,"column":983}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":83,"column":8},"generated":{"line":1,"column":989}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":83,"column":13},"generated":{"line":1,"column":994}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":84,"column":14},"generated":{"line":1,"column":1010}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":84,"column":14},"generated":{"line":1,"column":1012}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":84,"column":14},"generated":{"line":1,"column":1014}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":84,"column":14},"generated":{"line":1,"column":1023}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":84,"column":19},"generated":{"line":1,"column":1028}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":84,"column":33},"generated":{"line":1,"column":1042}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":84,"column":37},"generated":{"line":1,"column":1046}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":84,"column":42},"generated":{"line":1,"column":1049}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":84,"column":44},"generated":{"line":1,"column":1051}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":93,"column":2},"generated":{"line":1,"column":1062}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":93,"column":14},"generated":{"line":1,"column":1074}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":94,"column":9},"generated":{"line":1,"column":1077}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":94,"column":9},"generated":{"line":1,"column":1082}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":94,"column":20},"generated":{"line":1,"column":1091}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":97,"column":8},"generated":{"line":1,"column":1093}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":99,"column":11},"generated":{"line":1,"column":1112}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":99,"column":11},"generated":{"line":1,"column":1118}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":99,"column":18},"generated":{"line":1,"column":1125}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":99,"column":23},"generated":{"line":1,"column":1130}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":99,"column":41},"generated":{"line":1,"column":1148}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":99,"column":48},"generated":{"line":1,"column":1155}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":99,"column":53},"generated":{"line":1,"column":1160}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":99,"column":67},"generated":{"line":1,"column":1174}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":100,"column":8},"generated":{"line":1,"column":1178}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":100,"column":14},"generated":{"line":1,"column":1182}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":100,"column":15},"generated":{"line":1,"column":1183}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":100,"column":21},"generated":{"line":1,"column":1188}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":100,"column":23},"generated":{"line":1,"column":1190}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":100,"column":37},"generated":{"line":1,"column":1203}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":100,"column":45},"generated":{"line":1,"column":1210}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":100,"column":47},"generated":{"line":1,"column":1212}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":103,"column":8},"generated":{"line":1,"column":1225}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":103,"column":19},"generated":{"line":1,"column":1242}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":104,"column":4},"generated":{"line":1,"column":1245}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":104,"column":25},"generated":{"line":1,"column":1253}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":104,"column":30},"generated":{"line":1,"column":1258}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":104,"column":48},"generated":{"line":1,"column":1276}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":106,"column":9},"generated":{"line":1,"column":1279}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":106,"column":9},"generated":{"line":1,"column":1284}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":106,"column":25},"generated":{"line":1,"column":1298}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":106,"column":38},"generated":{"line":1,"column":1300}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":107,"column":8},"generated":{"line":1,"column":1304}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":107,"column":14},"generated":{"line":1,"column":1308}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":107,"column":15},"generated":{"line":1,"column":1309}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":107,"column":29},"generated":{"line":1,"column":1322}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":107,"column":31},"generated":{"line":1,"column":1324}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":107,"column":37},"generated":{"line":1,"column":1329}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":107,"column":47},"generated":{"line":1,"column":1338}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":107,"column":49},"generated":{"line":1,"column":1340}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":107,"column":56},"generated":{"line":1,"column":1347}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":105,"column":22},"generated":{"line":1,"column":1357}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":110,"column":2},"generated":{"line":1,"column":1363}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":111,"column":11},"generated":{"line":1,"column":1375}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":111,"column":11},"generated":{"line":1,"column":1381}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":112,"column":22},"generated":{"line":1,"column":1382}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":112,"column":22},"generated":{"line":1,"column":1395}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":112,"column":27},"generated":{"line":1,"column":1400}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":113,"column":18},"generated":{"line":1,"column":1413}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":113,"column":18},"generated":{"line":1,"column":1422}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":113,"column":23},"generated":{"line":1,"column":1427}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":114,"column":21},"generated":{"line":1,"column":1436}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":114,"column":21},"generated":{"line":1,"column":1448}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":114,"column":26},"generated":{"line":1,"column":1453}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":119,"column":9},"generated":{"line":1,"column":1466}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":120,"column":6},"generated":{"line":1,"column":1484}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":120,"column":39},"generated":{"line":1,"column":1486}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":121,"column":11},"generated":{"line":1,"column":1489}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":121,"column":11},"generated":{"line":1,"column":1496}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":121,"column":15},"generated":{"line":1,"column":1500}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":122,"column":8},"generated":{"line":1,"column":1502}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":122,"column":14},"generated":{"line":1,"column":1504}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":122,"column":32},"generated":{"line":1,"column":1517}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":122,"column":38},"generated":{"line":1,"column":1519}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":122,"column":52},"generated":{"line":1,"column":1528}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":122,"column":58},"generated":{"line":1,"column":1530}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":125,"column":0},"generated":{"line":1,"column":1544}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":125,"column":0},"generated":{"line":1,"column":1552}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":125,"column":0},"generated":{"line":1,"column":1570}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":31,"column":9},"generated":{"line":1,"column":1572}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":31,"column":9},"generated":{"line":1,"column":1574}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":31,"column":21},"generated":{"line":1,"column":1584}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":125,"column":0},"generated":{"line":1,"column":1596}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":125,"column":14},"generated":{"line":1,"column":1598}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":125,"column":14},"generated":{"line":1,"column":1600}},{"source":"../../src/optimizers/momentum_optimizer.ts","name":null,"original":{"line":125,"column":14},"generated":{"line":1,"column":1615}}],"sources":{"../../src/optimizers/momentum_optimizer.ts":"/**\n * @license\n * Copyright 2018 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n\nimport {ENGINE} from '../engine';\nimport {dispose, tidy} from '../globals';\nimport {scalar, zerosLike} from '../ops/ops';\nimport {ConfigDict, registerClass, Serializable, SerializableConstructor} from '../serialization';\nimport {Scalar, Tensor} from '../tensor';\nimport {NamedTensor, NamedVariableMap} from '../tensor_types';\n\nimport {OptimizerVariable} from './optimizer';\nimport {SGDOptimizer} from './sgd_optimizer';\n\n/** @doclink Optimizer */\nexport class MomentumOptimizer extends SGDOptimizer {\n  /** @nocollapse */\n  static className = 'Momentum';  // Name matters for Python compatibility.\n  private m: Scalar;\n  private accumulations: OptimizerVariable[] = [];\n\n  constructor(\n      protected learningRate: number, private momentum: number,\n      private useNesterov = false) {\n    super(learningRate);\n    this.m = scalar(this.momentum);\n  }\n\n  applyGradients(variableGradients: NamedVariableMap|NamedTensor[]) {\n    const variableNames = Array.isArray(variableGradients) ?\n        variableGradients.map(item => item.name) :\n        Object.keys(variableGradients);\n\n    variableNames.forEach((name, i) => {\n      const value = ENGINE.registeredVariables[name];\n      if (this.accumulations[i] == null) {\n        const trainable = false;\n        this.accumulations[i] = {\n          originalName: `${name}/momentum`,\n          variable: tidy(() => zerosLike(value).variable(trainable))\n        };\n      }\n\n      const accumulation = this.accumulations[i].variable;\n      const gradient = Array.isArray(variableGradients) ?\n          variableGradients[i].tensor :\n          variableGradients[name];\n      if (gradient == null) {\n        return;\n      }\n\n      tidy(() => {\n        let newValue: Tensor;\n        const newAccumulation = this.m.mul(accumulation).add(gradient);\n        if (this.useNesterov) {\n          newValue =\n              this.c.mul(gradient.add(newAccumulation.mul(this.m))).add(value);\n        } else {\n          newValue = this.c.mul(newAccumulation).add(value);\n        }\n        accumulation.assign(newAccumulation);\n        value.assign(newValue);\n      });\n    });\n    this.incrementIterations();\n  }\n\n  dispose(): void {\n    this.m.dispose();\n    if (this.accumulations != null) {\n      dispose(this.accumulations.map(v => v.variable));\n    }\n  }\n\n  /**\n   * Sets the momentum of the optimizer.\n   *\n   * @param momentum\n   */\n  setMomentum(momentum: number) {\n    this.momentum = momentum;\n  }\n\n  async getWeights(): Promise<NamedTensor[]> {\n    // Order matters for Python compatibility.\n    return [await this.saveIterations()].concat(this.accumulations.map(\n        v => ({name: v.originalName, tensor: v.variable})));\n  }\n\n  async setWeights(weightValues: NamedTensor[]): Promise<void> {\n    weightValues = await this.extractIterations(weightValues);\n    const trainable = false;\n    this.accumulations = weightValues.map(\n        v => ({originalName: v.name, variable: v.tensor.variable(trainable)}));\n  }\n\n  getConfig(): ConfigDict {\n    return {\n      'learningRate': this.learningRate,\n      'momentum': this.momentum,\n      'useNesterov': this.useNesterov\n    };\n  }\n\n  /** @nocollapse */\n  static fromConfig<T extends Serializable>(\n      cls: SerializableConstructor<T>, config: ConfigDict): T {\n    return new cls(\n        config['learningRate'], config['momentum'], config['useNesterov']);\n  }\n}\nregisterClass(MomentumOptimizer);\n"},"lineCount":null}},"error":null,"hash":"f4bb0e4bd56ebcc1a384971ff33ffe00","cacheData":{"env":{}}}